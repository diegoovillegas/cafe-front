<ion-split-pane contentId="main-content" when="md">

  <!-- MENÚ LATERAL -->
  <ion-menu contentId="main-content" menuId="main-menu" type="overlay">
    <ion-header>
      <ion-toolbar>
        <ion-title>Admin del Restaurante</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <ion-list lines="none">
        <ion-item routerLink="/panel" routerLinkActive="selected" detail="false">
          <ion-icon slot="start" name="home-outline"></ion-icon>
          <ion-label>Panel</ion-label>
        </ion-item>
        <ion-item routerLink="/productos" detail="false">
          <ion-icon slot="start" name="pricetags-outline"></ion-icon>
          <ion-label>Productos</ion-label>
        </ion-item>
        <ion-item routerLink="/ventas" detail="false">
          <ion-icon slot="start" name="cash-outline"></ion-icon>
          <ion-label>Ventas</ion-label>
        </ion-item>
        <ion-item routerLink="/usuarios" detail="false">
          <ion-icon slot="start" name="people-outline"></ion-icon>
          <ion-label>Usuarios</ion-label>
        </ion-item>
      </ion-list>

      <ion-list lines="none" class="ion-margin-top settings-link">
        <ion-item button routerLink="/ajustes" detail="false">
          <ion-icon slot="start" name="settings-outline"></ion-icon>
          <ion-label>Ajustes</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

  <!-- CONTENIDO -->
  <div class="ion-page" id="main-content">
    <ion-header>
      <ion-toolbar color="primary">
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Dashboard Cafetería</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="logout()">
            <ion-icon name="log-out-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding dashboard-content">
      <h1>Panel</h1>

      <!-- CARDS RESUMEN -->
      <ion-grid>
        <ion-row>

          <ion-col size="12" size-md="4">
            <ion-card class="summary-card">
              <ion-card-header>
                <ion-card-title class="card-label">Ventas Totales</ion-card-title>
                <ion-card-subtitle class="card-value">${{ totalVentas }}</ion-card-subtitle>
              </ion-card-header>
            </ion-card>
          </ion-col>

          <ion-col size="12" size-md="4">
            <ion-card class="summary-card">
              <ion-card-header>
                <ion-card-title class="card-label">Productos Registrados</ion-card-title>
                <ion-card-subtitle class="card-value">{{ productos.length }}</ion-card-subtitle>
              </ion-card-header>
            </ion-card>
          </ion-col>

          <ion-col size="12" size-md="4">
            <ion-card class="summary-card">
              <ion-card-header>
                <ion-card-title class="card-label">Productos con Stock Bajo</ion-card-title>
                <ion-card-subtitle class="card-value">{{ bajoStock.length }}</ion-card-subtitle>
              </ion-card-header>
            </ion-card>
          </ion-col>

        </ion-row>
      </ion-grid>

      <!-- GRÁFICO -->
      <div class="ion-margin-top">
        <h2>Gráfico de Ventas</h2>
        <ion-card>
          <ion-card-content>
            <canvas id="ventasChart"></canvas>
          </ion-card-content>
        </ion-card>
      </div>

      <!-- INVENTARIO BAJO -->
      <div class="ion-margin-top">
        <h2>Alertas de Inventario</h2>

        <ion-card>
          <ion-card-content>

            <ion-list>
              <ion-item class="table-header">
                <ion-label>Producto</ion-label>
                <ion-label class="ion-text-end">Stock</ion-label>
              </ion-item>

              <ion-item *ngFor="let item of bajoStock">
                <ion-label>{{ item.nombre }}</ion-label>
                <ion-label class="ion-text-end">{{ item.stock }}</ion-label>
              </ion-item>

              <ion-item *ngIf="bajoStock.length === 0">
                <ion-label>No hay productos con stock bajo</ion-label>
              </ion-item>

            </ion-list>

          </ion-card-content>
        </ion-card>
      </div>

    </ion-content>
  </div>
</ion-split-pane>
